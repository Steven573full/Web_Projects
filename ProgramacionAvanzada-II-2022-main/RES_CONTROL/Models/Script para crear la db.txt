/*version del 18/08/2022*/


/*Borrar evitando conflictos de llaves foráneas*/
USE GANADERA

DROP TABLE VACUNAS
DROP TABLE RESES
DROP TABLE POTREROS
DROP TABLE COLABORADORES
DROP TABLE ALIMENTACION
DROP TABLE FINCAS
DROP TABLE USUARIOS
DROP TABLE BITACORA


/*Crear evitando conflictos de llaves foráneas*/

USE GANADERA

CREATE TABLE BITACORA
(ID_ERROR INT IDENTITY(1,1) NOT NULL,
PRIMARY KEY(ID_ERROR),
DESCRIPCION_ERROR VARCHAR(300) NOT NULL,
FECHA_ERROR DATE NOT NULL);


USE GANADERA

CREATE TABLE USUARIOS
(ID_USUARIO INT IDENTITY(1,1) NOT NULL,
PRIMARY KEY(ID_USUARIO),
EMAIL VARCHAR(30) NOT NULL,
ROL VARCHAR (20) NULL,
PASSWORD VARCHAR(20) NOT NULL)


USE GANADERA

CREATE TABLE FINCAS
(ID_FINCA INT IDENTITY(1,1) NOT NULL,
PRIMARY KEY(ID_FINCA),
NOMBRE_FINCA VARCHAR(20) NOT NULL,
LOCACION_FINCA VARCHAR (80) NOT NULL)


USE GANADERA

CREATE TABLE ALIMENTACION
(ID_ALIMENTACION INT IDENTITY(1,1) NOT NULL,
TIPO_ALIMENTACION VARCHAR(30) NOT NULL,
PROPOSITO VARCHAR(15) NOT NULL,
PRIMARY KEY(ID_ALIMENTACION))


USE GANADERA

CREATE TABLE COLABORADORES
(ID_COLABORADOR INT IDENTITY(1,1) NOT NULL,
PRIMARY KEY(ID_COLABORADOR),
IDENTIFICACION_LEGAL VARCHAR(30) NOT NULL,
NOMBRE VARCHAR(30) NOT NULL,
APELLIDOS VARCHAR(60) NOT NULL,
ID_USUARIO INT NOT NULL,
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO))


USE GANADERA

CREATE TABLE POTREROS
(ID_POTRERO INT IDENTITY(1,1) NOT NULL,
PRIMARY KEY(ID_POTRERO),
DESCRIPCION_POTRERO VARCHAR(50) NOT NULL,
ID_FINCA INT NOT NULL,
ID_ALIMENTACION INT NOT NULL,
FOREIGN KEY (ID_FINCA) REFERENCES FINCAS(ID_FINCA),
FOREIGN KEY (ID_ALIMENTACION) REFERENCES ALIMENTACION(ID_ALIMENTACION))


USE GANADERA

CREATE TABLE RESES
(ID_RES INT IDENTITY(1,1) NOT NULL,
PRIMARY KEY(ID_RES),
RAZA VARCHAR(30) NOT NULL,
FIERRO VARCHAR(30) NOT NULL,
SEXO CHAR NOT NULL,
FECHA_NACIMIENTO_APROX DATE NOT NULL,
ID_POTRERO INT NOT NULL,
FOREIGN KEY (ID_POTRERO) REFERENCES POTREROS(ID_POTRERO))


USE GANADERA

CREATE TABLE VACUNAS
(ID_VACUNA INT IDENTITY(1,1) NOT NULL,
NOMBRE_VACUNA VARCHAR(30) NOT NULL,
DESCRIPCION_VACUNA VARCHAR(50) NOT NULL,
FECHA DATE,
DOSIS INT,
DOSIS_RECOMENDADA INT,
ID_RES INT NOT NULL,
ID_COLABORADOR INT NOT NULL,
PRIMARY KEY(ID_VACUNA),
FOREIGN KEY (ID_RES) REFERENCES RESES(ID_RES),
FOREIGN KEY (ID_COLABORADOR) REFERENCES COLABORADORES(ID_COLABORADOR))